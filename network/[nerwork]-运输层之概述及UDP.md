### 进程之间的通信
从通信和信息处理的角度，运输层为其上面的应用程提供通信服务，它是面向通信的最高层，也是面向用户的最低层。
当网络中的两台主机通信时，只有主机的协议栈才有运输层，而中间的路由器转发组只用到了下面三层（即网路层、数据链路层、物理层）。

从网络层来说，通信的是网络中两台主机，但我们平时所说的两台主机之间的通信，实际上指的是主机中的进程之间的通信。

因此运输层有一个非常重要的功能，那就是**复用和分用**；复用指的是主机中不同的应用进程都使用同一个传输层协议来传输数据；
分用指的是运输层能够将数据正确的交付给目标进程。网络层和运输层的最大区别就是网路层提供主机之间的通信，而运输层提供进程之间的通信。

运输层另一个主要的功能是差错检测，在网络层中，IP数据报的校验和只检测首部但是不检测数据部分。

根据用户需求的不同，运输层有两种不同的协议：无连接的UDP和面向连接的TCP。

### 运输层的两个主要协议
- 用户数据报协议UDP(User Datagram Protocol)
- 传输控制协议TCP(Transmission Control Protocol)
   
 UDP 在传输数据之间不需要建立连接；远程主机在收到UDP数据报之后也不需要给出确认。虽然UDP不提供可靠的交付，但它却是高效的传输协议。
 
 TCP 则是面向连接的服务，在数据传输之前需要建立连接，传输完成之后需要释放连接；TCP是端到端的，不提供广播和多播服务。由于TCP提供可靠交付，
 因此传输的开销也比较大，如确认、流量控制、计时器以及连接管理等。
 
### 运输层的端口
 在运输层的一个非常重要的功能是复用和分用，复用指的是应用层所有的进程都可以通过运输层来将数据传输到IP层，分用则是将数据准确的交付给不同的进程。
 那么运输层怎么识别不同的数据是哪一个进程的呢？解决的方法是在运输层协议使用协议端口号，简称端口。
 
 TCP/IP 使用一个16位的端口号来标识一个端口，需要注意的是端口只具备本地意义。16位的端口号意味着一台计算机最多可以用65535个端口。因此网络之间
 两台主机的进程需要实现通信，不仅需要知道对方的IP地址，还需要知道通信进程的端口号。
 
 端口号主要分为两类：
 
 - 服务端使用的端口号
    1. 系统端口号：0 ～ 1023
        这些端口号是派给TCP/IP中最重要的一些进程，让用户都知道。
    
    2. 登记端口号：1024 ～ 49151
        按照IANA规定的手续登记，防止重复。
 - 客户端端口号：49152 ～ 65535
    这些端口在客户端短暂使用，主要作用是服务端可以根据客户端的端口进行响应。
    
### 用户数据报协议UDP
UDP只在数据报服务上加了一小点功能，就是复用-分用和差错检测，UDP主要有以下特点：

1. UDP 是无连接的；即在发送数据之间是不要建立连接的，当然也不存在释放连接。
2. UDP 尽最大努力交付；即不保证可靠传输，因此不需要维持复杂的连接状态表。
3. UDP 是面向报文的，对于应用层交付的数据报，加上首部之后就给IP层了。
4. UDP 没有拥塞控制
5. UDP 支持一对一，一对多，多对多交互通信。
6. UDP 首部开销小，只有8个字节。

### UDP首部格式
UDP 数据报分为两个部分：数据部分和首部部分

首部部分占8个字节，以下字段各占2个字节：

- 源端口
- 目的端口
- 长度
- 检验和



 
  
  